# æœåŠ¡å¥åº·ç›‘æ§ç³»ç»Ÿ - åŸºç¡€é…ç½®ç¤ºä¾‹
# é€‚åˆå¿«é€Ÿå¼€å§‹ä½¿ç”¨çš„ç®€åŒ–é…ç½®

# å…¨å±€é…ç½®
global:
  check_interval: 30 # é»˜è®¤æ£€æŸ¥é—´éš”30ç§’
  log_level: DEBUG # æ—¥å¿—çº§åˆ«
  log_file: health-monitor.log # æ—¥å¿—æ–‡ä»¶

# æœåŠ¡ç›‘æ§é…ç½®
services:
  # Redisç¼“å­˜
  redis-cache:
    type: redis
    host: localhost
    port: 6379
    # password: "your_password"  # å¦‚æœRedisæœ‰å¯†ç ï¼Œå–æ¶ˆæ³¨é‡Šå¹¶è®¾ç½®
    timeout: 5
    check_interval: 10

  database:
    type: mysql
    host: localhost
    port: 3306
    username: root
    password: aiyun123!
    # database: users               # æ³¨é‡Šæ‰ç‰¹å®šæ•°æ®åº“ï¼Œåªæµ‹è¯•MySQLæœåŠ¡å™¨è¿æ¥
    timeout: 10                      # è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
    check_interval: 5                # æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
    # é«˜çº§é€‰é¡¹
    test_queries: true               # æ˜¯å¦æ‰§è¡Œç‰ˆæœ¬æŸ¥è¯¢ç­‰æµ‹è¯•
    collect_status: true             # æ˜¯å¦æ”¶é›†æ•°æ®åº“çŠ¶æ€ä¿¡æ¯
    test_database_access: false      # ç¦ç”¨æ•°æ®åº“è®¿é—®æµ‹è¯•ï¼Œå› ä¸ºæ²¡æœ‰æŒ‡å®šæ•°æ®åº“

# å‘Šè­¦é…ç½®
alerts:
  # é’‰é’‰æœºå™¨äººå‘Šè­¦
  - name: dingtalk
    type: http
    url: "https://oapi.dingtalk.com/robot/send?access_token=3a66c5e46570506ce0f8749c3d2da66afde17ec4376a6097d59a61613be72bad"
    method: POST
    headers:
      Content-Type: "application/json"
    ssl_verify: false # ä¸´æ—¶ç¦ç”¨SSLéªŒè¯ä»¥è§£å†³è¯ä¹¦é—®é¢˜
    max_retries: 3
    retry_delay: 2
    template: |
      {
        "msgtype": "text",
        "text": {
          "content": "ğŸš¨ æœåŠ¡å‘Šè­¦\n\næœåŠ¡: {{service_name}}\nçŠ¶æ€: {{status}}\næ—¶é—´: {{timestamp}}\né”™è¯¯: {{error_message}}"
        }
      }
